# å›½å†…éƒ¨ç½²æ–¹æ¡ˆæ¨è

## ğŸ‡¨ğŸ‡³ ä¸­å›½å›½å†…äº‘å¹³å°å¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | ä¼˜åŠ¿ | é€‚ç”¨æ€§ | æ¨èåº¦ |
|------|----------|------|--------|--------|
| **è…¾è®¯äº‘ Cloud Studio** | âœ… å®Œå…¨å…è´¹ | ä»£ç æ‰˜ç®¡+è¿è¡Œç¯å¢ƒ | å¼€å‘æ¼”ç¤º | â­â­â­â­â­ |
| **é˜¿é‡Œäº‘ PAI-DSW** | ğŸŸ¡ æœ‰é™å…è´¹ | AI/MLä¼˜åŒ– | AIåº”ç”¨ | â­â­â­â­ |
| **åä¸ºäº‘ ModelArts** | ğŸŸ¡ è¯•ç”¨é¢åº¦ | ä¼ä¸šçº§AIå¹³å° | æ­£å¼éƒ¨ç½² | â­â­â­â­ |
| **ç™¾åº¦æ™ºèƒ½äº‘ AI Studio** | âœ… å…è´¹GPUæ—¶é•¿ | AIå¼€å‘ç¯å¢ƒ | AIé¡¹ç›® | â­â­â­â­ |
| **è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨** | ğŸ”´ ä»˜è´¹ | ç®€å•æ˜“ç”¨ | å°å‹åº”ç”¨ | â­â­â­ |
| **é˜¿é‡Œäº‘ ECS** | ğŸ”´ ä»˜è´¹ | åŠŸèƒ½å®Œæ•´ | ä¼ä¸šåº”ç”¨ | â­â­â­ |

## ğŸ† ä¸»æ¨èï¼šè…¾è®¯äº‘ Cloud Studio

### ä¸ºä»€ä¹ˆæœ€é€‚åˆæ‚¨çš„é¡¹ç›®ï¼Ÿ

```yaml
âœ… å®Œå…¨å…è´¹:
- æ— æ—¶é—´é™åˆ¶
- 2GBå†…å­˜ + 1æ ¸CPU
- 10GBå­˜å‚¨ç©ºé—´
- å†…ç½®Gitæ”¯æŒ

âœ… AIå‹å¥½:
- é¢„è£…Pythonç¯å¢ƒ
- æ”¯æŒæœºå™¨å­¦ä¹ åº“
- ç½‘ç»œè®¿é—®ç¨³å®š

âœ… æ“ä½œç®€å•:
- åŸºäºæµè§ˆå™¨
- ä¸€é”®åˆ›å»ºç¯å¢ƒ
- æ— éœ€é…ç½®
```

### éƒ¨ç½²æ­¥éª¤

#### 1. è®¿é—® Cloud Studio
- ç½‘å€ï¼šhttps://cloudstudio.net/
- ä½¿ç”¨å¾®ä¿¡/QQç™»å½•

#### 2. åˆ›å»ºå·¥ä½œç©ºé—´
```bash
# é€‰æ‹©æ¨¡æ¿ï¼šPython 3.9
# é…ç½®ï¼š
CPU: 1æ ¸
å†…å­˜: 2GB  
å­˜å‚¨: 10GB
```

#### 3. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-username/Actor_dataset_construct.git
cd Actor_dataset_construct
```

#### 4. å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
```

#### 5. è¿è¡Œåº”ç”¨
```bash
python main.py web --host 0.0.0.0 --port 8080
```

#### 6. è®¿é—®åº”ç”¨
Cloud Studioä¼šè‡ªåŠ¨æä¾›å…¬ç½‘è®¿é—®åœ°å€

## ğŸ¥ˆ å¤‡é€‰æ–¹æ¡ˆï¼šç™¾åº¦ AI Studio

### ç‰¹ç‚¹
```yaml
âœ… ä¸“ä¸ºAIä¼˜åŒ–:
- å…è´¹GPUæ—¶é•¿
- é¢„è£…AIæ¡†æ¶
- æ•°æ®é›†ç®¡ç†

âœ… èµ„æºé…ç½®:
- åŸºç¡€ç‰ˆ: å…è´¹
- é«˜çº§ç‰ˆ: æŒ‰æ—¶è®¡è´¹
- GPUç‰ˆ: AIè®¡ç®—ä¼˜åŒ–
```

### éƒ¨ç½²æ­¥éª¤

#### 1. æ³¨å†Œ AI Studio
- ç½‘å€ï¼šhttps://aistudio.baidu.com/
- å®åè®¤è¯è·å¾—æ›´å¤šèµ„æº

#### 2. åˆ›å»ºé¡¹ç›®
```bash
# é€‰æ‹©ç¯å¢ƒï¼š
Python: 3.7+
æ¡†æ¶: PaddlePaddle/PyTorch
èµ„æº: CPU/GPUå¯é€‰
```

#### 3. ä¸Šä¼ ä»£ç 
- ä½¿ç”¨Notebookç¯å¢ƒ
- æˆ–ç›´æ¥å…‹éš†GitHubä»“åº“

## ğŸ¥‰ ä¼ä¸šçº§æ–¹æ¡ˆï¼šé˜¿é‡Œäº‘ PAI

### é€‚ç”¨åœºæ™¯
- ä¼ä¸šæ­£å¼éƒ¨ç½²
- å¤§è§„æ¨¡AIåº”ç”¨
- éœ€è¦é«˜å¯ç”¨æ€§

### ä¼˜åŠ¿
```yaml
âœ… ä¼ä¸šçº§ç‰¹æ€§:
- å¼¹æ€§ä¼¸ç¼©
- è´Ÿè½½å‡è¡¡
- ç›‘æ§å‘Šè­¦
- æ•°æ®å®‰å…¨

ğŸ’° æˆæœ¬:
- æŒ‰é‡ä»˜è´¹
- é¢„ä»˜è´¹ä¼˜æƒ 
- ä¼ä¸šæŠ˜æ‰£
```

## ğŸ› ï¸ å›½å†…ç¯å¢ƒä¼˜åŒ–é…ç½®

### 1. ä¾èµ–æºé…ç½®

åˆ›å»º `requirements-china.txt`ï¼š
```bash
# ä½¿ç”¨å›½å†…é•œåƒæº
-i https://pypi.tuna.tsinghua.edu.cn/simple

requests==2.31.0
beautifulsoup4==4.12.2
pillow==10.0.1
numpy==1.24.3
opencv-python==4.8.1.78
insightface==0.7.3
onnxruntime==1.16.3
scikit-learn==1.3.0
faiss-cpu==1.7.4
flask==3.0.0
flask-cors==4.0.0
tmdbv3api==1.9.0
tqdm==4.66.1
python-dotenv==1.0.0
pyyaml==6.0.1
loguru==0.7.2
```

### 2. ç½‘ç»œä¼˜åŒ–é…ç½®

`config/config.china.yaml`ï¼š
```yaml
# ä¸­å›½ç¯å¢ƒä¼˜åŒ–é…ç½®

# APIé…ç½® - è€ƒè™‘ç½‘ç»œå»¶è¿Ÿ
tmdb:
  api_key: "${TMDB_API_KEY}"
  timeout: 30                    # å¢åŠ è¶…æ—¶æ—¶é—´
  retry_count: 3                 # å¢åŠ é‡è¯•æ¬¡æ•°
  retry_delay: 2                 # é‡è¯•å»¶è¿Ÿ

# çˆ¬è™«é…ç½® - ç½‘ç»œä¼˜åŒ–
crawler:
  download_timeout: 30           # å¢åŠ ä¸‹è½½è¶…æ—¶
  concurrent_downloads: 2        # é™ä½å¹¶å‘æ•°
  request_delay: 1               # å¢åŠ è¯·æ±‚é—´éš”
  user_agent: "Mozilla/5.0 (compatible; ActorCrawler/1.0)"
  
  sources:
    - name: "tmdb_images"
      enabled: true
      max_results: 8
      timeout: 20
    - name: "baidu_images"  
      enabled: false             # å¯é€‰æ‹©å¯ç”¨ç™¾åº¦æœç´¢

# æ€§èƒ½ä¼˜åŒ–
performance:
  enable_cache: true             # å¯ç”¨ç¼“å­˜
  cache_timeout: 3600           # ç¼“å­˜1å°æ—¶
  max_memory_usage: 1.5         # é™åˆ¶å†…å­˜ä½¿ç”¨ (GB)
```

### 3. å¯åŠ¨è„šæœ¬ä¼˜åŒ–

`run_china.py`ï¼š
```python
#!/usr/bin/env python3
"""
ä¸­å›½ç¯å¢ƒä¼˜åŒ–å¯åŠ¨è„šæœ¬
"""
import os
import sys
from pathlib import Path

# è®¾ç½®ç¯å¢ƒå˜é‡
os.environ['PYTHONIOENCODING'] = 'utf-8'
os.environ['TZ'] = 'Asia/Shanghai'

# æ·»åŠ é¡¹ç›®è·¯å¾„
project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

from web.app import create_app
from src.utils.logger import get_logger

logger = get_logger(__name__)

if __name__ == '__main__':
    try:
        # è®¾ç½®ä¸­æ–‡ç¯å¢ƒ
        import locale
        try:
            locale.setlocale(locale.LC_ALL, 'zh_CN.UTF-8')
        except:
            pass
        
        # åˆ›å»ºåº”ç”¨
        app = create_app()
        
        # é…ç½®å‚æ•°
        host = os.getenv('HOST', '0.0.0.0')
        port = int(os.getenv('PORT', 8080))
        debug = os.getenv('DEBUG', 'false').lower() == 'true'
        
        logger.info(f"å¯åŠ¨ä¸­å›½ä¼˜åŒ–ç‰ˆæœ¬... (Host: {host}, Port: {port})")
        app.run(host=host, port=port, debug=debug)
        
    except Exception as e:
        logger.error(f"å¯åŠ¨å¤±è´¥: {e}")
        raise
```

## ğŸ’° æˆæœ¬å¯¹æ¯”

| æ–¹æ¡ˆ | æœˆæˆæœ¬ | èµ„æºé…ç½® | é€‚ç”¨é˜¶æ®µ |
|------|--------|----------|----------|
| **è…¾è®¯äº‘ Cloud Studio** | Â¥0 | 1æ ¸2G | å¼€å‘/æ¼”ç¤º |
| **ç™¾åº¦ AI Studio** | Â¥0-50 | å¯é€‰GPU | AIå¼€å‘ |
| **é˜¿é‡Œäº‘ PAI** | Â¥100-500 | å¼¹æ€§é…ç½® | ç”Ÿäº§ç¯å¢ƒ |
| **è…¾è®¯äº‘è½»é‡æœåŠ¡å™¨** | Â¥24-288 | 1-8æ ¸ | å°å‹åº”ç”¨ |

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

### æ¨èæµç¨‹ï¼šè…¾è®¯äº‘ Cloud Studio

```bash
# 1. è®¿é—® https://cloudstudio.net/
# 2. åˆ›å»ºPythonå·¥ä½œç©ºé—´
# 3. åœ¨ç»ˆç«¯æ‰§è¡Œï¼š

git clone https://github.com/your-repo.git
cd Actor_dataset_construct

# ä½¿ç”¨å›½å†…æºå®‰è£…ä¾èµ–
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt

# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ  TMDB_API_KEY

# å¯åŠ¨åº”ç”¨
python run_china.py

# åº”ç”¨ä¼šè‡ªåŠ¨åˆ†é…å…¬ç½‘åœ°å€ï¼Œå¯ç›´æ¥è®¿é—®
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç½‘ç»œè¿æ¥é—®é¢˜**
```bash
# ä½¿ç”¨å›½å†…DNS
export DNS_SERVER=114.114.114.114
```

2. **ä¾èµ–å®‰è£…æ…¢**
```bash
# ä½¿ç”¨æ¸…åå¤§å­¦é•œåƒæº
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

3. **TMDB APIè®¿é—®æ…¢**
```bash
# å¢åŠ è¶…æ—¶æ—¶é—´å’Œé‡è¯•
# åœ¨configä¸­è®¾ç½®æ›´é•¿çš„timeoutå€¼
```

4. **å†…å­˜ä¸è¶³**
```bash
# å‡å°‘å¹¶å‘å¤„ç†
# ä½¿ç”¨æ›´å°çš„å›¾ç‰‡å°ºå¯¸
# å¯ç”¨æ¨¡å‹æ‡’åŠ è½½
```

## ğŸ“‹ æ¨èé…ç½®æ€»ç»“

### ğŸ† æœ€ä½³æ–¹æ¡ˆï¼šè…¾è®¯äº‘ Cloud Studio
- **æˆæœ¬**: å®Œå…¨å…è´¹
- **é€‚ç”¨**: å¼€å‘ã€æ¼”ç¤ºã€å°è§„æ¨¡ä½¿ç”¨
- **ä¼˜åŠ¿**: é›¶é…ç½®ã€å³å¼€å³ç”¨
- **ç½‘å€**: https://cloudstudio.net/

### ğŸ¥ˆ AIä¸“ç”¨ï¼šç™¾åº¦ AI Studio  
- **æˆæœ¬**: åŸºç¡€å…è´¹ + é«˜çº§ä»˜è´¹
- **é€‚ç”¨**: AIé¡¹ç›®ä¸“ä¸šå¼€å‘
- **ä¼˜åŠ¿**: AIä¼˜åŒ–ã€GPUæ”¯æŒ
- **ç½‘å€**: https://aistudio.baidu.com/

é€‰æ‹©è…¾è®¯äº‘ Cloud Studioä½œä¸ºé¦–é€‰ï¼Œå®ƒå®Œå…¨å…è´¹ä¸”éå¸¸é€‚åˆæ‚¨çš„é¡¹ç›®æ¼”ç¤ºå’Œå¼€å‘éœ€æ±‚ï¼
